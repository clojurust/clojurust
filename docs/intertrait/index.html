<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A library providing direct casting among trait objects implemented by a type."><meta name="keywords" content="rust, rustlang, rust-lang, intertrait"><title>intertrait - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../ayu.css" disabled ><script id="default-settings"></script><script src="../storage.js"></script><script src="../crates.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="icon" type="image/svg+xml" href="../favicon.svg">
<link rel="alternate icon" type="image/png" href="../favicon-16x16.png">
<link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../intertrait/index.html'><div class='logo-container rust-logo'><img src='../rust-logo.png' alt='logo'></div></a><p class="location">Crate intertrait</p><div class="block version"><p>Version 0.2.1</p></div><div class="sidebar-elems"><a id="all-types" href="all.html"><p>See all intertrait's items</p></a><div class="block items"><ul><li><a href="#modules">Modules</a></li><li><a href="#macros">Macros</a></li><li><a href="#traits">Traits</a></li></ul></div><p class="location"></p><div id="sidebar-vars" data-name="intertrait" data-ty="mod" data-relpath="../"></div></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu"><img src="../brush.svg" width="18" height="18" alt="Pick another theme!"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" class="help-button">?</button>
                <a id="settings-menu" href="../settings.html"><img src="../wheel.svg" width="18" height="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Crate <a class="mod" href="">intertrait</a><button id="copy-path" onclick="copy_path(this)">⎘</button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../src/intertrait/lib.rs.html#1-508" title="goto source code">[src]</a></span></h1><div class="docblock"><p>A library providing direct casting among trait objects implemented by a type.</p>
<p>In Rust, an object of a sub-trait of <a href="https://doc.rust-lang.org/std/any/trait.Any.html"><code>Any</code></a> can be downcast to a concrete type
at runtime if the type is known. But no direct casting between two trait objects
(i.e. without involving the concrete type of the backing value) is possible
(even no coercion from a trait object to that of its super-trait yet).</p>
<p>With this crate, any trait object with <a href="./trait.CastFrom.html"><code>CastFrom</code></a> as its super-trait can be cast directly
to another trait object implemented by the underlying type if the target traits are
registered beforehand with the macros provided by this crate.</p>
<h1 id="usage" class="section-header"><a href="#usage">Usage</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">intertrait</span>::<span class="kw-2">*</span>;
<span class="kw">use</span> <span class="ident">intertrait::cast</span>::<span class="kw-2">*</span>;

<span class="kw">struct</span> <span class="ident">Data</span>;

<span class="kw">trait</span> <span class="ident">Source</span>: <span class="ident">CastFrom</span> {}

<span class="kw">trait</span> <span class="ident">Greet</span> {
    <span class="kw">fn</span> <span class="ident">greet</span>(<span class="kw-2">&amp;</span><span class="self">self</span>);
}

<span class="attribute">#[<span class="ident">cast_to</span>]</span>
<span class="kw">impl</span> <span class="ident">Greet</span> <span class="kw">for</span> <span class="ident">Data</span> {
    <span class="kw">fn</span> <span class="ident">greet</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) {
        <span class="macro">println!</span>(<span class="string">&quot;Hello&quot;</span>);
    }
}

<span class="kw">impl</span> <span class="ident">Source</span> <span class="kw">for</span> <span class="ident">Data</span> {}

<span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="ident">Data</span>;
<span class="kw">let</span> <span class="ident">source</span>: <span class="kw-2">&amp;</span><span class="kw">dyn</span> <span class="ident">Source</span> <span class="op">=</span> <span class="kw-2">&amp;</span><span class="ident">data</span>;
<span class="kw">let</span> <span class="ident">greet</span> <span class="op">=</span> <span class="ident">source</span>.<span class="ident">cast</span>::<span class="op">&lt;</span><span class="kw">dyn</span> <span class="ident">Greet</span><span class="op">&gt;</span>();
<span class="ident">greet</span>.<span class="ident">unwrap</span>().<span class="ident">greet</span>();</pre></div>
<p>Target traits must be explicitly designated beforehand. There are three ways to do it:</p>
<ul>
<li><a href="./attr.cast_to.html"><code>#[cast_to]</code></a> to <code>impl</code> item</li>
<li><a href="./attr.cast_to.html"><code>#[cast_to(Trait)]</code></a> to type definition</li>
<li><a href="./macro.castable_to.html"><code>castable_to!(Type =&gt; Trait1, Trait2)</code></a></li>
</ul>
<p>If the underlying type involved is <code>Sync + Send</code> and you want to use it with <a href="https://doc.rust-lang.org/std/sync/struct.Arc.html"><code>Arc</code></a>,
use <a href="./trait.CastFromSync.html"><code>CastFromSync</code></a> in place of <a href="./trait.CastFrom.html"><code>CastFrom</code></a> and add <code>[sync]</code> flag before the list
of traits in the macros. Refer to the documents for each of macros for details.</p>
<p>For casting, refer to traits defined in <a href="./cast/index.html"><code>cast</code></a> module.</p>
</div><h2 id="modules" class="section-header"><a href="#modules">Modules</a></h2>
<table><tr class="module-item"><td><a class="mod" href="cast/index.html" title="intertrait::cast mod">cast</a></td><td class="docblock-short"><p><code>cast</code> module contains traits to provide <code>cast</code> method for various references
and smart pointers.</p>
</td></tr></table><h2 id="macros" class="section-header"><a href="#macros">Macros</a></h2>
<table><tr class="module-item"><td><a class="macro" href="macro.castable_to.html" title="intertrait::castable_to macro">castable_to</a></td><td class="docblock-short"><p>Declares target traits for casting implemented by a type.</p>
</td></tr></table><h2 id="traits" class="section-header"><a href="#traits">Traits</a></h2>
<table><tr class="module-item"><td><a class="trait" href="trait.CastFrom.html" title="intertrait::CastFrom trait">CastFrom</a></td><td class="docblock-short"><p><code>CastFrom</code> must be extended by a trait that wants to allow for casting into another trait.</p>
</td></tr><tr class="module-item"><td><a class="trait" href="trait.CastFromSync.html" title="intertrait::CastFromSync trait">CastFromSync</a></td><td class="docblock-short"><p><code>CastFromSync</code> must be extended by a trait that is <code>Any + Sync + Send + 'static</code>
and wants to allow for casting into another trait behind references and smart pointers
especially including <code>Arc</code>.</p>
</td></tr></table><h2 id="attributes" class="section-header"><a href="#attributes">Attribute Macros</a></h2>
<table><tr class="module-item"><td><a class="attr" href="attr.cast_to.html" title="intertrait::cast_to attr">cast_to</a></td><td class="docblock-short"><p>Attached on an <code>impl</code> item or type definition, registers traits as targets for casting.</p>
</td></tr></table></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../" data-current-crate="intertrait" data-search-index-js="../search-index.js" data-search-js="../search.js"></div>
    <script src="../main.js"></script></body></html>